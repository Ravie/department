<!DOCTYPE html>
<html xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
      xmlns:th="http://www.thymeleaf.org">
<head>
    <div th:insert="~{fragments/bootstrap :: header}"></div>
    <script src="../static/sweetalert2.all.min.js" type="text/javascript"></script>
    <script src="../static/index.js" type="text/javascript"></script>
    <title>Отделы</title>
</head>
<body>
<div th:insert="~{fragments/navbar :: navbar}"></div>
<div class="container">
<div sec:authorize="hasRole('ROLE_ADMIN')">
    <h5 class="mt-2">Добавление нового отдела:</h5>
    <form method="post" onsubmit="return checkDepartmentForm();" th:action="@{/department}">
        <label for="name" class="mr-1">Отдел:</label><input class="mr-2" id="name" name="name" placeholder="Отдел" type="text" required/>
        <button type="submit" class="btn btn-outline-success">Добавить отдел</button>
    </form>
</div>
<form method="get" th:action="@{/department}">
    <div class="mt-4"><h5>Поиск:</h5></div>
    <div>
        <label for="searchName" class="mr-1">Отдел:</label><input class="mr-2" id="searchName" name="name" placeholder="Отдел" th:value="${name}" type="text"/>
        <button id="filter" type="submit" class="btn btn-outline-success">Найти</button>
    </div>
</form>
    <div class="mt-4"><h5>Список отделов:</h5></div>
<table class="table table-bordered table-hover table-sm table-fit">
    <thead class="thead-dark">
    <tr>
        <th class="fit-column-by-content">ID отдела</th>
        <th>Название отдела</th>
        <th sec:authorize="hasRole('ROLE_ADMIN')"></th>
        <th sec:authorize="hasRole('ROLE_ADMIN')"></th>
    </tr>
    </thead>
    <tbody>
    <tr th:each="department: ${departments}">
        <td th:utext="${department.id}"></td>
        <td th:utext="${department.name}"></td>
        <td class="fit-column-by-content" sec:authorize="hasRole('ROLE_ADMIN')"><a class="btn btn-block btn-outline-warning" th:href="@{|/department/edit/${department.id}|}">Изменить</a></td>
        <td class="fit-column-by-content" sec:authorize="hasRole('ROLE_ADMIN')"><a class="btn btn-block btn-outline-danger" th:href="@{|/department/delete/${department.id}|}">Удалить</a></td>
    </tr>
    </tbody>
</table>
</div>
<div th:insert="~{fragments/bootstrap :: jscripts}"></div>
</body>
</html>